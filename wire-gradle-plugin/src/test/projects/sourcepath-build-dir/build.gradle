plugins {
  id 'application'
  id 'org.jetbrains.kotlin.jvm' version libs.versions.kotlin
  id 'com.squareup.wire' version "$wireVersion"
}

final String OUTPUT_REPO_DIR = "$buildDir/src/main/proto/squareup"

task copyProtos(type: Copy) {
  from 'src/main/copydir/squareup'
  include 'dinosaurs/*.proto'
  include 'geology/*.proto'

  into OUTPUT_REPO_DIR
  fileMode = 0644
  includeEmptyDirs false
}

afterEvaluate {
  tasks.getByName('generateProtos').dependsOn copyProtos
}

wire {
  sourcePath {
    srcDir OUTPUT_REPO_DIR
  }
  java{
  }
}
